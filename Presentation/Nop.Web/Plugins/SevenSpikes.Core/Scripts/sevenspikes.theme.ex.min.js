(function($,ssCore,ssEx){var megaMenuSkipEventBinding=false;var lastScrollTop=0;var appSettings={isEnabled:false};(function(){window.onload=function(){$('.mega-menu-responsive .labelfornextplusbutton').on('click',function(){$(this).next('.plus-button').click();});};})();function addMobileClassIfEnabled(shouldAddClassForMobile){var addClassOnMobile=function(){if(shouldAddClassForMobile&&ssCore.isMobile()){$('.product-grid .item-box').addClass('mobile-box');}};addClassOnMobile();$(document).on('nopAjaxFiltersFiltrationCompleteEvent',addClassOnMobile);}function attachDetachSideBanners(viewport){if(viewport<ssEx.breakPointWidth){var banners=$('.leftside-3 .slider-wrapper, .rightside-3 .slider-wrapper, .side-2 .slider-wrapper').detach();$('.master-wrapper-main').append('<div class="mobile-banners"></div>');$('.mobile-banners').append(banners);}else{$('.mobile-banners').detach();}}function toggleSideBlocks(isInitialLoad){$('.block').each(function(){if(ssCore.getViewPort().width>ssEx.breakPointWidth){if(!isInitialLoad){if(appSettings.isEnabled===false){$(this).children().eq(1).show();$(this).children().eq(0).children('a.toggleControl').removeClass('closed');}else{$(this).children('.listbox').eq(0).show();}$(this).find('.jcarousel-container-vertical').show();}}else{if(appSettings.isEnabled===false){$(this).children().eq(1).hide();$(this).children().eq(0).children('a.toggleControl').addClass('closed');}else{$(this).children('.listbox').eq(0).hide();}$(this).find('.jcarousel-container-vertical').hide();}});}function addSideBlocksClickEvents(){$('.block .title').not($('.nopAjaxFilters7Spikes .block .title')).off('click').on('click',function(){if(ssCore.getViewPort().width<=ssEx.breakPointWidth){var thisSibling=$(this).siblings();thisSibling.slideToggle('slow',function(){thisSibling.css('overflow','');});}});$('.nop-jcarousel.vertical-holder .carousel-title').on('click',function(){if(ssCore.getViewPort().width<=ssEx.breakPointWidth){var thisSibling=$(this).siblings();thisSibling.slideToggle('slow',function(){thisSibling.css('overflow','');});}});}function sublistIndent(sublistSelector,withCategories,sublistWidth,levelZIndex){var sublistElement=$(sublistSelector);if(ssCore.getViewPort().width<=ssEx.breakPointWidth){sublistElement.css({'width':sublistWidth-7,'z-index':sublistElement.css('z-index')+levelZIndex});$('> .sublist > li > '+withCategories,sublistSelector).css('width',sublistWidth-57);}else{sublistElement.css({'width':'','z-index':''});$('> .sublist > li > '+withCategories,sublistSelector).css('width','');}var nextSublist=sublistSelector+'> .sublist > li > .sublist-wrap';if($(nextSublist).length>0){sublistIndent(nextSublist,withCategories,sublistWidth-7,levelZIndex+1);}}function initSublistIndent(){if($('.mega-menu-responsive').length>0){sublistIndent('.mega-menu-responsive > li > .sublist-wrap',appSettings.selectors.withSubcategories,320,1);}else{sublistIndent(appSettings.selectors.headerMenu+' > ul > li > .sublist-wrap',appSettings.selectors.withSubcategories,320,1);}}function hasScrolled(navWrapperReal,navWrapperParent){var realNavWrapper=$(navWrapperReal);var navWrapper=realNavWrapper.filter('.stick');if(navWrapper.length===0||navWrapperParent.length===0){realNavWrapper.removeClass('nav-up');return;}var st=$(window).scrollTop();if(st<=$(navWrapperParent).offset().top){realNavWrapper.removeClass('nav-up');return;}if(st>lastScrollTop){navWrapper.addClass('nav-up');}else{navWrapper.removeClass('nav-up');}lastScrollTop=st;}function stickyNav(navWrapper,navWrapperParent){var parent=$(navWrapperParent);var windowScrollTop=$(window).scrollTop();if(windowScrollTop>0&&windowScrollTop>=parent.offset().top){parent.css('height',parent.height()+'px');$(navWrapper).addClass('stick');$(document).trigger({type:'navigationHasSticked'});}else{parent.css('height','');$(navWrapper).removeClass('stick');$(document).trigger({type:'navigationHasSticked'});}}function windowScrollEvents(){if(appSettings.hasStickyNav){stickyNav(appSettings.selectors.navWrapper,appSettings.selectors.navWrapperParent);}if(appSettings.doesDesktopHeaderMenuStick){stickyNav(appSettings.selectors.headerMenuDesktopStickElement,appSettings.selectors.headerMenuDesktopStickParentElement);}$(window).on('scroll',function(){if(appSettings.hasStickyNav){stickyNav(appSettings.selectors.navWrapper,appSettings.selectors.navWrapperParent);}if(appSettings.doesDesktopHeaderMenuStick){stickyNav(appSettings.selectors.headerMenuDesktopStickElement,appSettings.selectors.headerMenuDesktopStickParentElement);}if(appSettings.displayGoToTop){if($(window).scrollTop()>100){$('#goToTop').show();}else{$('#goToTop').hide();}}hasScrolled(appSettings.selectors.navWrapper,appSettings.selectors.navWrapperParent);});if(appSettings.displayGoToTop){$('#goToTop').on('click',function(){$('html,body').animate({scrollTop:0},400);});}}function onWidthBreak(viewport,isInitialLoad){var selectors=appSettings.selectors;var isSearchBoxDetachable=appSettings.isSearchBoxDetachable;var isHeaderLinksWrapperDetachable=appSettings.isHeaderLinksWrapperDetachable;if(viewport<=ssEx.breakPointWidth){$(selectors.headerMenu).add($(selectors.sublist)).add($(selectors.overlayOffCanvas));$(selectors.filtersContainer).detach().insertAfter(selectors.headerMenu);if(isSearchBoxDetachable){$(selectors.searchBox).detach().insertAfter(selectors.navWrapperParent);}if(isHeaderLinksWrapperDetachable){$(selectors.headerLinksWrapper).detach().insertAfter(selectors.headerLinksWrapperMobileInsertAfter);}$(selectors.shoppingCartLink).off('mouseenter.flyout-cart').off('mouseleave.flyout-cart');$('.top-menu > li > .sublist-wrap').css('display','');}else{$(selectors.headerMenu).css({'height':'','top':''});$(selectors.sublist).css({'height':'','top':''});$(selectors.filtersContainer).css('height','');if(!isInitialLoad){$(selectors.filtersContainer).detach().insertBefore("#availableSortOptionsJson");}if(isHeaderLinksWrapperDetachable){$(selectors.headerLinksWrapper).detach().prependTo(selectors.headerLinksWrapperDesktopPrependTo);}if(isSearchBoxDetachable){$(selectors.searchBox).detach().insertAfter(selectors.searchBoxBefore);}$(selectors.shoppingCartLink).on('mouseenter.flyout-cart',function(e){var cart=$(this).children('.flyout-cart');if(cart.attr('isSliding')==undefined||cart.attr('isSliding')==='false'){cart.attr('isSliding','true').slideDown(100,function(){$(this).css('overflow','');$(this).attr('isSliding','false');});}e.preventDefault();}).on('mouseleave.flyout-cart',function(e){$(this).children('.flyout-cart').attr('isSliding','true').slideUp(100,function(){$(this).css('overflow','');$(this).attr('isSliding','false');});e.preventDefault();});}}function onOverlayClick(){var selectors=appSettings.selectors;$(selectors.movedElements).removeClass('move-right');$(selectors.overlayOffCanvas).fadeOut(function(){$(this).removeClass('show');});$('html, body').removeClass('scrollYRemove');}function overlayOffCanvasShow(selectors){$(selectors.overlayOffCanvas).addClass('show').fadeIn();$('html, body').addClass('scrollYRemove');$(document).trigger({type:"onOverlayOffCanvasShow"});}function onMenuTitleClick(){var selectors=appSettings.selectors;$(selectors.headerMenu).addClass('open');$(selectors.movedElements).addClass('move-right');overlayOffCanvasShow(selectors);}function addDetachableClickEvents(){var selectors=appSettings.selectors;$(selectors.searchBoxOpener).click(function(){$(selectors.searchBox).addClass('open');overlayOffCanvasShow(selectors);});$(selectors.headerLinksOpener).on('click',function(){$(selectors.headerLinksWrapper).addClass('open');overlayOffCanvasShow(selectors);});$(selectors.menuTitle).click(function(){onMenuTitleClick();});$(selectors.closeMenu).click(function(){$(selectors.headerMenu).removeClass('open');onOverlayClick();if(appSettings.isEnabled){$('.header-menu, .sublist-wrap').perfectScrollbar('destroy');}});$(selectors.overlayOffCanvas).click(function(){$(selectors.sublist).parent().removeClass('active').animate({scrollTop:0});$(selectors.headerMenu).add($(selectors.filtersContainer)).removeClass('open');$(selectors.searchBox).removeClass('open');$(selectors.headerLinksWrapper).removeClass('open');onOverlayClick();if(appSettings.isEnabled){$('.header-menu, .sublist-wrap, .nopAjaxFilters7Spikes.open').perfectScrollbar('destroy');}});$('.sublist').on('click','.back-button',function(){$(this).closest('.sublist-wrap').removeClass('active');if(appSettings.isEnabled){$(this).parents().eq(4).perfectScrollbar({swipePropagation:false,wheelSpeed:2,suppressScrollX:true});}});$(selectors.filtersOpener).click(function(){$(selectors.filtersContainer).toggleClass('open');$(selectors.movedElements).toggleClass('move-right');overlayOffCanvasShow(selectors);if(appSettings.isEnabled){$('.nopAjaxFilters7Spikes.open').perfectScrollbar({swipePropagation:false,wheelSpeed:1,suppressScrollX:true});}});$('<div class="close-filters"><span>close</span></div>').insertBefore('.filtersPanel');$('.close-filters').click(function(){$(selectors.filtersContainer).toggleClass('open');$(selectors.movedElements).toggleClass('move-right');$(selectors.overlayOffCanvas).fadeOut(function(){$(this).removeClass('show');});$('html, body').removeClass('scrollYRemove');if(appSettings.isEnabled){$('.nopAjaxFilters7Spikes.open').perfectScrollbar('destroy');}});}function loadProductBoxImagesOnScroll(){var windowObj=$(window);var lazyLoadProductBoxImages=function(){var currentScrollTop=windowObj.scrollTop()+windowObj.outerHeight()+100;$('.item-box .picture a img[data-lazyloadsrc]').not('[loadedimage]').each(function(){var that=$(this);if(that.offset().top<currentScrollTop){that.attr('src',that.attr('data-lazyloadsrc'));that.attr('loadedimage','true');}});};$(document).ready(function(){lazyLoadProductBoxImages();windowObj.on('scroll',lazyLoadProductBoxImages);});$(document).on('nopAjaxFiltersFiltrationCompleteEvent nopAjaxCartProductAddedToCartEvent nopQuickViewDataShownEvent newProductsAddedToPageEvent',lazyLoadProductBoxImages);}ssEx.breakPointWidth=980;ssEx.addWindowEvent=function(eventName,functionToCall){if(window.addEventListener)window.addEventListener(eventName,functionToCall,false);else if(window.attachEvent)window.attachEvent("on"+eventName,functionToCall);};ssEx.initResponsiveTheme=function(appSettingsObj){if(appSettingsObj==null){return;}appSettings=appSettingsObj;if(appSettings.selectors!=null){if(appSettings.selectors.headerLinksWrapperMobileInsertAfter==null){appSettings.selectors.headerLinksWrapperMobileInsertAfter='.header';}if(appSettings.selectors.headerLinksWrapperDesktopPrependTo==null){appSettings.selectors.headerLinksWrapperDesktopPrependTo='.header';}}ssEx.breakPointWidth=appSettings.themeBreakpoint||980;var previousWidth=sevenSpikesCore.getViewPort().width;var checkWidth=function(isInitialLoad){var viewport=sevenSpikesCore.getViewPort().width;if(appSettings.isEnabled){if(isInitialLoad&&appSettings.doesDesktopHeaderMenuStick){$(appSettings.selectors.headerMenu).wrap('<div id="headerMenuParent" class="header-menu-parent"></div>');}}if(isInitialLoad||(viewport>ssEx.breakPointWidth&&previousWidth<=ssEx.breakPointWidth)||(viewport<=ssEx.breakPointWidth&&previousWidth>ssEx.breakPointWidth)){addMobileClassIfEnabled(appSettings.shouldAddClassForMobile);toggleSideBlocks(isInitialLoad);if(appSettings.hasSideBanners){attachDetachSideBanners(viewport);}if(appSettings.isEnabled){onWidthBreak(viewport,isInitialLoad);if(appSettings.doesSublistHasIndent===true){initSublistIndent();}}$(document).trigger({type:'themeBreakpointPassed7Spikes',isInitialLoad:isInitialLoad,isMobileResolution:viewport<=ssEx.breakPointWidth});}previousWidth=viewport;};checkWidth(true);sevenSpikesEx.addWindowEvent('resize',function(){checkWidth(false);});sevenSpikesEx.addWindowEvent('orientationchange',function(){checkWidth(false);});if(appSettings.isEnabled){if(appSettings.hasStickyNav||appSettings.displayGoToTop||appSettings.doesDesktopHeaderMenuStick){if(appSettings.selectors.headerMenuDesktopStickElement==null){appSettings.selectors.headerMenuDesktopStickElement=appSettings.selectors.headerMenu;}if(appSettings.selectors.headerMenuDesktopStickParentElement==null){appSettings.selectors.headerMenuDesktopStickParentElement='#headerMenuParent';}windowScrollEvents();}addDetachableClickEvents();var closeFiltersPanelAfterFiltrationOnMobile=$('.nopAjaxFilters7Spikes').attr('data-closefilterspanelafterfiltrationinmobile')=='true';if(appSettings.doesScrollAfterFiltration===true){$(document).on('nopAjaxFiltersFiltrationCompleteEvent',function(){if(sevenSpikesCore.getViewPort().width<=ssEx.breakPointWidth&&closeFiltersPanelAfterFiltrationOnMobile){$(appSettings.selectors.overlayOffCanvas).triggerHandler('click');setTimeout(function(){$(appSettings.selectors.overlayOffCanvas).hide();},450);}});}}addSideBlocksClickEvents();if($('.nopAjaxFilters7Spikes .block').length===0){$('.responsive-nav-wrapper .filters-button').remove();}if(appSettings.DisableFootable==null||appSettings.DisableFootable===false){if(typeof $('body').footable=='function'){$('.wishlist-page .cart, .compare-products-table-mobile, .recurring-payments .data-table, .downloadable-products-page .data-table, .reward-points-history .data-table, .order-summary-content .cart, .order-details-page .data-table, .return-request-page .data-table, .forum-table, .private-messages-page .data-table').footable();}if($('.checkout-page').length>0){$(document).ajaxSuccess(function(){if($('.order-summary-content .cart').length>0){$('.order-summary-content .cart').footable();}});}}if(appSettings.lazyLoadImages){loadProductBoxImagesOnScroll();}};})(jQuery,window.sevenSpikesCore,window.sevenSpikesEx=window.sevenSpikesEx||{});